# 修正内容の確認 (Walkthrough)

## 概要
「LOD機能が動かない」という問題を解決するため、**LOD生成機能 (LOD Generator)** を新規実装しました。
これにより、高ポリゴンのオブジェクトから自動的に簡易モデルを作成し、距離に応じて表示を切り替えることが可能になります。

## 実施した変更
### 1. 新規スクリプトの作成
- **`LODGenerator.cs`**
  - **Vertex Clustering (頂点クラスタリング)** アルゴリズムを実装。
  - グリッドベースで近くの頂点を1つにまとめることで、高速かつ堅牢にポリゴン数を削減します。
  - 元のメッシュ (LOD0) に加え、LOD1 (中品質), LOD2 (低品質) を自動生成し、Unity標準の `LODGroup` コンポーネントを設定します。
  - スキニングされたメッシュ (SkinnedMeshRenderer) は非対応のため、警告を出してスキップする安全設計としています。

### 2. UIの更新
- **`WorldOptimizerWindow.cs`**
  - [詳細設定 (Advanced)] タブに新しいセクション **「LOD生成 (Experimental)」** を追加しました。
  - **"Generate LODs (選択オブジェクト)"** ボタンを追加。Hierarchyでオブジェクトを選択して押すだけで処理が走ります。

## 動作確認手順

### 1. 準備
1. Unityエディタを開き、シーンに適当な高ポリゴンメッシュ（Sphereなどでも可）を配置します。
2. 配置したオブジェクトを選択状態にします。

### 2. 実行
1. 上部メニュー `WorldOptimizer` > `Open Optimizer` を開きます。
2. `詳細設定 (Advanced)` タブを選択します。
3. `LOD生成 (Experimental)` セクションまでスクロールします。
4. **`Generate LODs (選択オブジェクト)`** ボタンをクリックします。

### 3. 確認
1. **Inspectorの確認**:
   - 選択したオブジェクトに `LODGroup` コンポーネントが追加されていることを確認してください。
   - 子オブジェクトとして `_LOD1`, `_LOD2` という名前のオブジェクトが生成されていることを確認してください。
2. **Scene Viewでの確認**:
   - カメラをオブジェクトから遠ざけていくと、LODレベルが切り替わり（LODGroupのバーが動く）、メッシュが簡易表示に切り替わることを確認してください。
   - `Stats` ウィンドウを表示し、遠く離れた際に `Tris`（三角形数）が減少していることを確認してください。

## 注意点
- **Experimental機能**: 今回実装した削減アルゴリズムは簡易的なものです。複雑な形状のメッシュでは、形状が崩れる（ブロック状になる）可能性があります。
- **元に戻す**: 生成されたLODオブジェクトやLODGroupコンポーネントは、Undo（Ctrl+Z）で元に戻すことができます。
